//
//  main.c
//  HZLib
//
//  Created by tony on 13-11-16.
//  Copyright (c) 2013ƒÍ tony. All rights reserved.
//

#include <stdio.h>

unsigned char ImgData[] = {
    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
    0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,
    0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0xff,0x80,0x40,0x08,0x30,0x10,0x20,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x68,0x3f,0xff,0x08,0x30,0x11,0xf8,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x68,0x3f,0xff,0x08,0x30,0x11,0xf8,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xff,0x00,0x00,0x7f,0xfe,0x7d,0x08,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x6b,0x07,0xfc,0x16,0x30,0x2d,0xf8,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0d,0xff,0x04,0x0c,0x16,0x30,0x2d,0x08,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x3f,0xff,0x16,0x30,0x2d,0xf8,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x3f,0xff,0x16,0x30,0x2d,0xf8,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0xff,0x30,0x01,0x66,0xfe,0x2d,0x26,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1c,0x00,0x03,0xf0,0x76,0x82,0x2d,0x28,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0d,0xff,0x82,0x11,0x08,0x82,0x11,0x10,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x8b,0x04,0x11,0x16,0x82,0x2d,0x28,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x8b,0x04,0x11,0x16,0x82,0x2d,0x28,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0d,0x18,0xb8,0x1f,0x60,0xfe,0x41,0xc6,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x07,0x8f,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x08,0x70,0x40,0xef,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x08,0x70,0x40,0xef,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x10,0x00,0x80,0x10,0x60,0x00,0x0f,0xff,0x30,0x0c,0x00,0x80,0x00,0x00,0x00,
    0x00,0x20,0x18,0x38,0x20,0x60,0x00,0x00,0x60,0x08,0x0c,0x1f,0xfc,0x1c,0x00,0x00,
    0x00,0xc0,0x64,0x45,0x00,0x60,0x00,0x03,0xfc,0x0b,0xff,0x00,0x80,0x3e,0x00,0x00,
    0x00,0xc1,0x00,0x01,0x00,0x10,0x00,0x00,0x80,0x00,0x0c,0x08,0x88,0x3e,0x00,0x00,
    0x00,0xc1,0x00,0x01,0x00,0x10,0x00,0x00,0x80,0x00,0x0c,0x08,0x88,0x3e,0x00,0x00,
    0x01,0x01,0x00,0x00,0xc0,0x10,0x00,0x1f,0xff,0xbd,0x8c,0x06,0xb0,0x3e,0x00,0x00,
    0x02,0x0e,0x18,0x1c,0xc0,0x10,0x00,0x01,0x00,0x04,0x4c,0x7f,0xfe,0x1c,0x00,0x00,
    0x02,0x16,0x64,0x22,0x20,0x10,0x00,0x03,0xfc,0x04,0x4c,0x01,0xc0,0x1c,0x00,0x00,
    0x02,0x16,0x64,0x22,0x20,0x10,0x00,0x03,0xfc,0x04,0x4c,0x01,0xc0,0x1c,0x00,0x00,
    0x04,0xe8,0x83,0x41,0x1c,0x08,0x00,0x0d,0x04,0x04,0x0c,0x06,0xb0,0x00,0x00,0x00,
    0x07,0x10,0x8f,0x47,0x03,0x88,0x00,0x11,0xfc,0x04,0x3c,0x08,0x88,0x1c,0x00,0x00,
    0x00,0x20,0x6c,0x26,0x01,0x78,0x00,0x01,0x04,0x0a,0x00,0x70,0x86,0x1c,0x00,0x00,
    0x00,0xc0,0x18,0x1c,0x00,0x80,0x00,0x01,0xfc,0x31,0xff,0x00,0x80,0x00,0x00,0x00,
    0x00,0xc0,0x18,0x1c,0x00,0x80,0x00,0x01,0xfc,0x31,0xff,0x00,0x80,0x00,0x00,0x00,
    0x00,0xc1,0x87,0x80,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x01,0x06,0x78,0x3c,0x20,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x01,0x08,0x07,0xc2,0xc0,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x01,0x08,0x00,0x01,0xc0,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x01,0x08,0x00,0x01,0xc0,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x01,0x08,0x18,0x01,0xc0,0x60,0x00,0x00,0x00,0xf1,0xf3,0x87,0xc0,0x00,0x00,0x00,
    0x00,0xc6,0x18,0xc2,0x20,0x80,0x00,0x00,0x03,0x0e,0x1c,0x78,0x70,0x00,0x00,0x00,
    0x00,0xc1,0x00,0xc2,0x00,0x80,0x00,0x00,0x04,0x44,0x11,0x10,0x38,0x00,0x00,0x00,
    0x00,0x26,0xe0,0x04,0x01,0x00,0x00,0x00,0x04,0x80,0x12,0x00,0x38,0x00,0x00,0x00,
    0x00,0x26,0xe0,0x04,0x01,0x00,0x00,0x00,0x04,0x80,0x12,0x00,0x38,0x00,0x00,0x00,
    0x00,0x11,0x18,0x38,0x03,0x00,0x00,0x00,0x04,0x80,0x12,0x00,0x38,0x00,0x00,0x00,
    0x00,0x0e,0x87,0xc2,0x1c,0x00,0x00,0x00,0x04,0x00,0x10,0x00,0x38,0x00,0x00,0x00,
    0x00,0x01,0xe0,0x04,0xe0,0x00,0x00,0x00,0x03,0x00,0x1c,0x00,0x70,0x00,0x00,0x00,
    0x00,0x1e,0x18,0x3f,0x1e,0x00,0x00,0x00,0x00,0x80,0x32,0x00,0xc0,0x00,0x00,0x00,
    0x00,0x1e,0x18,0x3f,0x1e,0x00,0x00,0x00,0x00,0x80,0x32,0x00,0xc0,0x00,0x00,0x00,
    0x00,0x38,0x07,0xc0,0x0f,0x00,0x00,0x00,0x00,0x40,0x61,0x01,0x80,0x00,0x00,0x00,
    0x00,0xe9,0xff,0xff,0x0d,0x80,0x00,0x00,0x00,0x31,0xc0,0x87,0x00,0x00,0x00,0x00,
    0x01,0xe9,0x1b,0xb9,0x0d,0xe0,0x00,0x00,0x00,0x0b,0x80,0x6e,0x00,0x00,0x00,0x00,
    0x03,0xc9,0xf0,0x1f,0x0c,0xf0,0x00,0x00,0x00,0x06,0x00,0x18,0x00,0x00,0x00,0x00,
    0x03,0xc9,0xf0,0x1f,0x0c,0xf0,0x00,0x00,0x00,0x06,0x00,0x18,0x00,0x00,0x00,0x00,
    0x07,0x06,0xe0,0x06,0x10,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x07,0xc1,0x00,0x00,0x20,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x07,0xe0,0x80,0x00,0xc1,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x07,0xe0,0x80,0x00,0xc1,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,
    0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff   
};

unsigned char ConvImgData[1024];
int idx = 0;

int convone()
{
    FILE* fphzk = NULL;
    int i, j, k, offset;
    int flag;
    unsigned char buffer[32];
    unsigned char word[3] = "谭";
    unsigned char key[8] = {
        0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01
    };
    
    fphzk = fopen("/bak/HZK16", "rb");
    if(fphzk == NULL){
        fprintf(stderr, "error hzk16\n");
        return 1;
    }
    offset = (94*(unsigned int)(word[0]-0xa0-1)+(word[1]-0xa0-1))*32;
    fseek(fphzk, offset, SEEK_SET);
    fread(buffer, 1, 32, fphzk);
    for(k=0; k<32; k++){
        printf("%02X ", buffer[k]);
    }
    printf("\n");
    for(k=0; k<16; k++){
        for(j=0; j<2; j++){
            for(i=0; i<8; i++){
                flag = buffer[k*2+j]&key[i];
                printf("%s", flag?"*":" ");
            }
        }
        printf("\n");
    }
    fclose(fphzk);
    fphzk = NULL;
    return 0;
}

int convTwo(){
         FILE* fphzk = NULL;
        int i, j, k, offset;
        int flag;
        unsigned char buffer[32];
        unsigned char word[5] = "谭";
        unsigned char key[8] = {
            0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01
        };
        fphzk = fopen("/bak/HZK16", "rb");
        if(fphzk == NULL){
            fprintf(stderr, "error hzk16\n");
            return 1;
        }
        while(1){
            printf("Please input HZ:");
            for(;;){
                fgets((char*)word, 5, stdin);
                //word = "Ã∑";
                //*word = "Ã∑";
                if(*word == '\n')
                    break;
                offset = (94*(unsigned int)(word[0]-0xa0-1)+(word[1]-0xa0-1))*32;
                fseek(fphzk, offset, SEEK_SET);
                fread(buffer, 1, 32, fphzk);
                for(k=0; k<16; k++){
                    for(j=0; j<2; j++){
                        for(i=0; i<8; i++){
                            flag = buffer[k*2+j]&key[i];
                            printf("%s", flag?"*":" ");
                        }
                    }
                    printf("\n");
                }
                printf("uchar code key[32] = {");
                for(k=0; k<31; k++){
                    printf("0x%02X,", buffer[k]);
                }
                printf("0x%02X};\n", buffer[31]);
                printf("\n");
            }
        }
        fclose(fphzk);
        fphzk = NULL;
        return 0;
    }

void convtwo(){
    printf("Conver bit map begin\n");
    int i, j, b,k,n;
  //  int flag;
    unsigned char d='\0';//v='\0',t = 0;
    unsigned char buffer[8];
    unsigned char key[8] = {
        0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01
    };
    unsigned char bit[8] = {
        0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80
    };
    //8 page
    for (i=0; i<8; i++) {
        //16 byte perline
        for (j=0; j<16; j++) {
            for (b=0; b<8; b++) {
                buffer[b] = ImgData[i*16*8 + b*16 +j];
            }
            for (k=0; k<8; k++) {
                for (n = 0; n<8; n++) {
                    if(buffer[n]&key[k]) d = d|bit[n];
                  //  t = buffer[n]&key[k];
                  //  if(t != 0){
                  //      v = key[7-n];
                  //      d = d|v;
                  //  }
                }
                ConvImgData[idx++]=d;
                printf("0x%02X,",d);
                d='\0';
            }
            printf("\n");
        }
    }
}

int main(int argc, const char * argv[])
{

    // insert code here...
    unsigned char a = '\04';
    unsigned char b = '\03';
    printf("Hello, World! %02X\n",(a|b));
    convtwo();
   // conv();
    return 0;
}



